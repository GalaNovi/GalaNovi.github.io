!function(E,H,x){var e="accordion",i={transitionSpeed:300,transitionEasing:"ease",controlElement:"[data-control]",contentElement:"[data-content]",groupElement:"[data-accordion-group]",singleOpen:!0};function n(t,n){this.element=t,this.options=E.extend({},i,n),this._defaults=i,this._name=e,this.init()}n.prototype.init=function(){var e,i,a,o,r=this.options,n=E(this.element),t=n.find("> "+r.controlElement),s=n.find("> "+r.contentElement),c=0<n.parents("[data-accordion]").length,d={"max-height":0,overflow:"hidden"},h=function(){var t=(x.body||x.documentElement).style,n="transition";if("string"==typeof t[n])return!0;var e=["Moz","webkit","Webkit","Khtml","O","ms"];n="Transition";for(var i=0;i<e.length;i++)if("string"==typeof t[e[i]+n])return!0;return!1}();function l(t,n){n?s.css({"-webkit-transition":"",transition:""}):s.css({"-webkit-transition":"max-height "+r.transitionSpeed+"ms "+r.transitionEasing,transition:"max-height "+r.transitionSpeed+"ms "+r.transitionEasing})}function f(t){var n=0;t.children().each(function(){n+=E(this).outerHeight(!0)}),t.data("oHeight",n)}function m(t,n,e,i){var a,o=t.filter(".open").find("> [data-content]"),s=o.find("[data-accordion].open > [data-content]");r.singleOpen||(s=s.not(n.siblings("[data-accordion].open").find("> [data-content]"))),a=o.add(s),t.hasClass("open")&&a.each(function(){var t=E(this).data("oHeight");switch(i){case"+":E(this).data("oHeight",t+e);break;case"-":E(this).data("oHeight",t-e);break;default:throw"updateParentHeight method needs an operation"}E(this).css("max-height",E(this).data("oHeight"))})}function u(t){if(t.hasClass("open")){var n=t.find("> [data-content]"),e=n.find("[data-accordion].open > [data-content]"),i=n.add(e);f(i),i.css("max-height",i.data("oHeight"))}}function g(t,n){if(t.trigger("accordion.close"),h){if(c)m(t.parents("[data-accordion]"),t,n.data("oHeight"),"-");n.css(d),t.removeClass("open")}else n.css("max-height",n.data("oHeight")),n.animate(d,r.transitionSpeed),t.removeClass("open")}function p(t,n){if(t.trigger("accordion.open"),h){if(l(),c)m(t.parents("[data-accordion]"),t,n.data("oHeight"),"+");!function(t){H.requestAnimationFrame?requestAnimationFrame(t):H.webkitRequestAnimationFrame?webkitRequestAnimationFrame(t):H.mozRequestAnimationFrame?mozRequestAnimationFrame(t):setTimeout(t,1e3/60)}(function(){n.css("max-height",n.data("oHeight"))}),t.addClass("open")}else n.animate({"max-height":n.data("oHeight")},r.transitionSpeed,function(){n.css({"max-height":"none"})}),t.addClass("open")}function v(){var t=!!r.singleOpen&&0<n.parents(r.groupElement).length;f(s),t&&function(t){t.closest(r.groupElement);var n=t.siblings("[data-accordion]").filter(".open"),e=n.find("[data-accordion]").filter(".open"),i=n.add(e);i.each(function(){var t=E(this),n=t.find(r.contentElement);g(t,n)}),i.removeClass("open")}(n),n.hasClass("open")?g(n,s):p(n,s)}s.each(function(){var t=E(this);0!=t.css("max-height")&&(t.closest("[data-accordion]").hasClass("open")?(l(),f(t),t.css("max-height",t.data("oHeight"))):t.css({"max-height":0,overflow:"hidden"}))}),n.attr("data-accordion")||(n.attr("data-accordion",""),n.find(r.controlElement).attr("data-control",""),n.find(r.contentElement).attr("data-content","")),t.on("click",v),t.on("accordion.toggle",function(){if(r.singleOpen&&1<t.length)return!1;v()}),t.on("accordion.refresh",function(){u(n)}),E(H).on("resize",(e=function(){u(n)},function(){var t=this,n=arguments;o?clearTimeout(o):a&&e.apply(t,n),o=setTimeout(function(){a||e.apply(t,n),o=null},i||100)}))},E.fn[e]=function(t){return this.each(function(){E.data(this,"plugin_"+e)||E.data(this,"plugin_"+e,new n(this,t))})}}(jQuery,window,document);